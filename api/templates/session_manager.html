{% extends "base.html" %}

{% block title %}Session Manager{% endblock %}

{% block content %}
<h1>ğŸ“± Telegram Session Manager</h1>

<div class="card">
    <h2>Session Status</h2>

    {% if session_data.exists %}
    <div
        style="background: #d1fae5; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--success); margin-bottom: 1rem;">
        <strong style="color: #065f46;">âœ… Active Session</strong>
    </div>

    <table>
        <thead>
            <tr>
                <th>Property</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Phone</strong></td>
                <td><code>{{ session_data.phone }}</code></td>
            </tr>
            <tr>
                <td><strong>User ID</strong></td>
                <td><code>{{ session_data.user_id }}</code></td>
            </tr>
            <tr>
                <td><strong>Name</strong></td>
                <td>{{ session_data.name }}</td>
            </tr>
            <tr>
                <td><strong>Username</strong></td>
                <td>@{{ session_data.username }}</td>
            </tr>
        </tbody>
    </table>

    <form method="POST" action="{{ url_for('telegram_logout') }}" style="margin-top: 1rem;">
        <button type="submit" class="btn-danger" onclick="return confirm('Logout from Telegram session?');">
            ğŸšª Logout
        </button>
    </form>
    {% else %}
    <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--warning);">
        <strong style="color: #92400e;">âš ï¸ No Active Session</strong>
        <p style="color: #92400e; margin-top: 0.5rem;">You need to login to Telegram first.</p>
    </div>

    <a href="{{ url_for('telegram_config') }}" class="btn btn-success" style="margin-top: 1rem;">
        âš™ï¸ Configure API
    </a>
    <a href="{{ url_for('telegram_login') }}" class="btn" style="margin-top: 1rem;">
        ğŸ“± Login to Telegram
    </a>
    {% endif %}
</div>

<div class="alert alert-info">
    â„¹ï¸ <strong>Note:</strong> Session management is not available in serverless deployments. Sessions require persistent
    file storage.
</div>
{% endblock %}