{% extends "base.html" %}

{% block title %}Content Management{% endblock %}

{% block content %}
<h1>ğŸ“ Content Management</h1>

<div class="card">
    <h2>Editable Content</h2>
    <p style="color: #64748b; margin-bottom: 1.5rem;">Manage text content displayed in the bot.</p>

    {% if contents %}
    <form method="POST">
        <div class="form-group">
            <label for="key">Content Key</label>
            <select id="key" name="key" required>
                {% for content in contents %}
                <option value="{{ content[0] }}">{{ content[0] }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="content">Content Text</label>
            <textarea id="content" name="content" rows="6" required placeholder="Enter content text..."></textarea>
        </div>

        <button type="submit" class="btn-success">ğŸ’¾ Save Changes</button>
    </form>
    {% else %}
    <p style="text-align: center; padding: 2rem; color: #64748b;">
        No editable content configured yet.
    </p>
    {% endif %}
</div>

{% if contents %}
<div class="card">
    <h2>Current Content</h2>
    <table>
        <thead>
            <tr>
                <th>Key</th>
                <th>Content</th>
                <th>Last Updated</th>
            </tr>
        </thead>
        <tbody>
            {% for content in contents %}
            <tr>
                <td><code>{{ content[0] }}</code></td>
                <td style="max-width: 400px; overflow: hidden; text-overflow: ellipsis;">{{ content[1][:100] }}...</td>
                <td>{{ content[2] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}